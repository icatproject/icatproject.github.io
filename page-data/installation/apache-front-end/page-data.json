{"componentChunkName":"component---src-templates-default-jsx","path":"/installation/apache-front-end/","result":{"data":{"markdownRemark":{"html":"<p>An Apache web server can easily be configured to act as a front end to\none or more  Glassfish servers to expose the normal https port 443 There\nare a number of ways of doing it, two of which use the ajp protocol,\nwhich is a stripped down binary http equivalent to give better\nperformance, for connecting to Glassfish. The module mod_jk is no\nlonger widely distributed so it is probably better to use the standard\napache mod_proxy_ajp.</p>\n<p>In any case you will want to install the apache ssl module so that https\nis supported (for example</p>\n<pre><code>yum install mod_ssl\n</code></pre>\n<p>on many systems that support rpm packages). The machines running the\nGlassfish server or servers need to have port 8009 opened to the machine\nrun the Apache web server. As ajp traffic is not secured, port 8009\nshould only be opened to the web server.</p>\n<p>On the Glassfish server enter:</p>\n<pre><code>asadmin create-network-listener --protocol http-listener-1 --listenerport 8009 --jkenabled true jk-connector\n</code></pre>\n<p>and restart Glassfish to set up the ajp connector.</p>\n<p>To configure apache (on linux) to forward everything to Glassfish,\ncreate a file, proxy.conf inside the directory /etc/httpd/conf.d with\nthe line:</p>\n<pre><code>ProxyPass / ajp:localhost:8009/\n</code></pre>\n<p>and restart httpd. If you have a group of machines configured to work\ntogether (which has been possible since release 4.3.3 of ICAT) then the\nentry should be:</p>\n<pre><code>&#x3C;Proxy balancer://satellites>\n\nBalancerMember ajp://m1.example.com:8009 retry=60 timeout=3600\n\nBalancerMember ajp://m2.example.com:8009 retry=60 timeout=3600\n\n&#x3C;/Proxy>\n\nProxyPass / balancer://satellites/\n</code></pre>\n<p>where m1.example.com and m2.example.com are two machines running\nGlassfish with an ajp connector on port 8009. Note the trailing \"/\" at\nthe end of the ProxyPass line.</p>\n<p>The paramter retry=60 will give a 60 second pause before that server is\nretried should it be found to be unavailable.</p>\n<p>The timeout value defaults to 60 (seconds). If ICAT does not complete\nthe call by the timeout then Apache will throw an error. In the example\nabove the value 3600 allows an hour.</p>\n<p>Clients connecting to the Apache web server on port 443 (the default\nhttps port) must then trust Apache and not the individual Glassfishes.\nWhen you install mod_ssl a certificate /etc/ssl/certs/localhost.crt is\ngenerated for you as a self signed certificate. For testing purposes you\ncan add this to the truststore used by your client. For production use\nyou will normally install a real certificate for Apache to use.</p>","frontmatter":{"title":"Apache front end","date":null}}},"pageContext":{"slug":"/installation/apache-front-end/"}},"staticQueryHashes":["2186722355","3212510956","3248290905","3649515864","4121107168"],"slicesMap":{}}