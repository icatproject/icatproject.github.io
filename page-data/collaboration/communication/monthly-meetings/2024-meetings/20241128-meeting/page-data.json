{"componentChunkName":"component---src-templates-default-jsx","path":"/collaboration/communication/monthly-meetings/2024-meetings/20241128-meeting/","result":{"data":{"markdownRemark":{"html":"<h2>Attendance</h2>\n<p>Attendees:</p>\n<ul>\n<li>Rolf Krahl</li>\n<li>Louise Davies</li>\n<li>Kirsty Syder</li>\n<li>Marjolaine Bodin</li>\n<li>Kevin Phipps</li>\n<li>Alex de Maria</li>\n<li>Patrick Austin</li>\n</ul>\n<h2>Agenda</h2>\n<h2>Site Updates</h2>\n<h3>HZB</h3>\n<p>Nothing to report</p>\n<p>Working on sample database. Connected to ICAT but not in ICAT. Separate instance but closely tied to ICAT. Developing. Still issue in ICAT that <a href=\"https://repo.icatproject.org/site/icat/server/6.0.0/schema.html#Sample\">Investigation &#x3C;-> Sample relation is 1 to many</a>. <a href=\"https://github.com/icatproject/icat.server/issues/231\">Need many to many</a>. This is incompatible with our usecase, so will become urgent at some point.</p>\n<p>Alex: What is scope of Sample Database.\nRolf: Link all the Datasets that are related to that Sample. Notebooks. Idea is that there is little hope that some Sample describing schema. Rather, to have information about the sample need to tie the history of the sample creation, characterisation, measurement and other things. For this, one identifier, and manage it. Once you have that, you can mint ... identfiers for the Sample. Do nice things.\nAlex: Also interested in extending the metadata of the Sample. Once it is created, there is a lot of information but it does not come to the Facility. Should be prepared before doing the experiment. This is tricky.\nRolf: Hard to get users to do it, but giving the possibility to do it would be the first step . Home institute could register, and use an existing identifier from their home institue, that is the first step. Depends on user communities and home facilities. Maybe they have something there that they can point to the logbooks that they have. Idea is to have the basic infrastuture in place that links to other things. Ideally the logbook from sample creation.\nAlex: How do you think we motivate them to do that? Most of the time the users do not care.\nRolf: Aware that this is the tricky part. Very nice things that you need to do, first is make it possible. Next is to... multiple approaches, e.g. make it rewarding. If users are interested they should have the means to do so. Aware this catches only the minority.\nAlex: Fear that even if possible you will have around 0 Samples declared. They will not do it.\nRolf: Anticipate that a wide variation of user behaviour. Projects like the rock IT project. Where that they will do that. Discussing in the DAPHNE project. Few, but they will make use of that. Once these users see a benefit, and others see it makes sense, others will follow. Have quite some in house research users, have a much closer relation to them and discuss workflows. They will be an easier catch. Can integrate the whole thing in their lab workflows. Pretty well aware it will not be adopted by all immediately. If you are interested can present it and seee what you think. At the moment in development phase. Similar approach to ICAT+ but in a different direction. Using Postgresql, more than can be captured in Parameters. Every entry in Sample Database corresponds. Two reasons: linking datasets and don't want to re-implement auth - use ICAT for that. Users need ICAT sessionIds. Will get to see everyhting that ICAT lets them, using the Rule system.</p>\n<h3>ESRF</h3>\n<p>Last week, ISPYB collab meeting. Interest in some facilities in running SciCAT. Invited SciCAT to talk about their roadmap, to catch up to ICAT features their roadmap takes them to 2029.</p>\n<p>Number of datasets (especially processed). 3x more processed than raw. Too many processed data in the ingest queue, takes hours for data to be ingested &#x26; seen in portal. Need to increase number of ingesters\nKevin: is your ingestion single threaded?\nAlex: no, multi-threaded. However, not touched in 10 years. Should probably rethink. However, can scale easily by adding more machines, but limit is datafiles in DB.\n~1500 Datasets an hour, think can scale by a factor of ~2-3.</p>\n<p>Kevin: SciCAT road map is to get to base ICAT or ICAT+ (&#x26; DataPortal)?\nISpyb roadmap - 5 years is to get to the ICAT+/Ipsyb functionality. Needs to include sample tracking, visualisations. A lot of non-core/OOTB ICAT functionality.</p>\n<p>Presentations:\nScicat by Max Novelli:\n<a href=\"https://indico.elettra.eu/event/47/contributions/1002/attachments/257/648/MXCuBE_ISPyB_Trieste_20241120.pdf\">https://indico.elettra.eu/event/47/contributions/1002/attachments/257/648/MXCuBE_ISPyB_Trieste_20241120.pdf</a></p>\n<p>Scicat roadmap by Alberto (MAXIV):\n<a href=\"https://indico.elettra.eu/event/47/contributions/852/attachments/231/615/MAXIV%20ISPyB%20Meeting%20Elettra%202024%20-%20Future.pdf\">https://indico.elettra.eu/event/47/contributions/852/attachments/231/615/MAXIV%20ISPyB%20Meeting%20Elettra%202024%20-%20Future.pdf</a></p>\n<p>ESRF:\n<a href=\"https://indico.elettra.eu/event/47/contributions/1001/attachments/237/622/ISPyB_MXCube%20Nov%202024%20ELETTRA%20ESRF.pdf\">https://indico.elettra.eu/event/47/contributions/1001/attachments/237/622/ISPyB_MXCube%20Nov%202024%20ELETTRA%20ESRF.pdf</a></p>\n<p>All presentations:\n<a href=\"https://indico.elettra.eu/event/47/sessions/223/#20241120\">https://indico.elettra.eu/event/47/sessions/223/#20241120</a></p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin-left: 0 !important; margin-right: 0 !important;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb27e089a3bde8556dacd00bb47922ab/c1b63/esrf_processed_datasets_histogram.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.28571428571429%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA9hAAAPYQGoP6dpAAABp0lEQVR42p2SbW+bMBSF8/9/0lZt/VLSVRPZ0iRrQl4gLNQhCcGAMdjg02ucfJym7UpH17KOH18OHoFKKQVeFOA8R9M00FoPsvtJkoAxNvTj8Yg0TVGQt+975+s6J62gyT+yh/Isw/V0Qkpq29beAWPM30VQ00i3PsRoq8oB7Y3/VTSVSRkMO8D436Do60YWVpalu+WfaOQvOPrlAmYXwExeHNDmcwf+qfKWMurNDeOqp2jKMIScTaE2AbR/A1qYEAI9AWVn0N0OCm0GUEf7TGicpUbZAXVRoqYh+HIJ7n8H/zFBEazAX57RSnnPkEMRKCoVtoXCOwHiSuHSdMhIe1pPzxJRA+xXW2Rvb0iePLDPn5B6T8iDAMwbuwkV/fqKcsxoAv8k4TGBRdZgfpEIeYNdLvEzFfAPnF7BFeFkipgOJ4+PSB4ecPz6BednD+/jMdq6xmjIo9Nglyvm+wTLmA1aRQeso99Yb0JsNjvstiHi9RrR4hfC+QL72czp9RUhKaYIWjvhPXhJdFGVN1WuiwoVdSv7sK95DiHJR95qkBh6Sf6a9m19AKzS/G1q17IMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Processed datasets@ESRF over time\"\n        title=\"\"\n        src=\"/static/bb27e089a3bde8556dacd00bb47922ab/8c557/esrf_processed_datasets_histogram.png\"\n        srcset=\"/static/bb27e089a3bde8556dacd00bb47922ab/4edbd/esrf_processed_datasets_histogram.png 175w,\n/static/bb27e089a3bde8556dacd00bb47922ab/13ae7/esrf_processed_datasets_histogram.png 350w,\n/static/bb27e089a3bde8556dacd00bb47922ab/8c557/esrf_processed_datasets_histogram.png 700w,\n/static/bb27e089a3bde8556dacd00bb47922ab/e996b/esrf_processed_datasets_histogram.png 1050w,\n/static/bb27e089a3bde8556dacd00bb47922ab/c1b63/esrf_processed_datasets_histogram.png 1200w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Processed datasets@ESRF over time</figcaption>\n  </figure></p>\n<h3>ISIS</h3>\n<p>Louise: Santosh on leave. Same as last time. Security updates, Payara migration stuff.</p>\n<h3>DLS</h3>\n<p>Had meeting with users for quick wins with DataGateway. 2 main things - single visit download. Single visit is fairly easy as long as restricted to DLS users.</p>\n<p>Patrick: current plan to change datagateway-download-api (was the TopCAT backend) and nothing else (at least at first). Minimal DataGateway (UI) changes. Introduce a queue and queue up visit restore jobs when low loads.\nRolf: Would have a separate component.\nPatrick: it's going in the place it's easiest to put it. dg-download-api is centralised, DLS in particular has multiple IDSes so dg-dl-api is the central part.</p>\n<h2>Component Updates</h2>\n<h3>icat.server</h3>\n<p>Alan is still working on work to containerise &#x26; modernisation but still ongoing</p>\n<p>Alex: modTime? Can't be modified ourselves\nKevin: every entity has it, part of entity base class.\nLouise: used for audit info\nLouise: note, Datafile has datafileModTime etc. which is separate to modTime\nRolf: yeah datafileModTime is for the file metadata</p>\n<p>Alex: yes, in UI want to sort by most recent Sample. Sort by modTime. Also want to sort by raw dataset modTime.\nRolf: Unsure if sorting is a good idea. E.g. database updates, would update all the modTimes.\nPatrick: e.g. schema updates would affect things?\nRolf: should rely on startDate/endDate of Dataset.\nAlex: problem is it's on the Sample.\nPatrick: Could have a sample parameter?\nAlex: yes, it's slower... Just need to be careful with modifying the modTime\nLouise: It's only a UX thing, so maybe not a concern that the ordering gets wiped?\nAlex: but with 1000s of datasets, might never find the most \"recent\" if ordering is wrong</p>\n<p>Louise: Maybe misremembering - pending schema changes?\nRolf: Yes, originally planned by the end of the year. Suppose it is not realistic. We just need to do that.</p>\n<h3>ids.server</h3>\n<p>Nothing</p>\n<p>Alex: we've changed our fork. Created new endpoint. Gets the real location where the datafile is. Location in ICAT is location it was generated. We have multiple restore locations. ISPYB it's useful to know where the file currently is. So created a new endpoint.\nRolf: it depends on your plugin. Plugin processes the location attribute, and determines how to access that file.\nAlex: current IDS endpoint tells you the status (e.g. ONLINE), but not the location. So that's what new endpoint does.\nRolf: IDS doesn't know where the location is\nAlex: our IDS plugin knows where to find the file\nRolf: exactly, the plugin knows not the IDS\nAlex: Have implemented new endpoint that requests the plugin where it actually is. Goes to the plugin and asks. Plugin responds with the current location of the file or Dataset.\nK: To do that, do you just have N locations on disk and look for them and if not their on tape? It can't look in ICAT because it [the information] is not there.\nAlex: Yes, exactly. For datafile id, if I get an empty array, it's archived. Otherwise, array with locations (it can be in multiple locations).\nRolf: TBH still a bit puzzled. Meaning of the location is only something the plugin knows. IDS has no clue.\nAlex: When you mean location you mean column of the Datafile. We say this is just an identifier. What this endpoint retrieves is the absolute path.\nRolf: You put meaning into that. It has something to\nPatrick: it's not dealing with the df location. Give a datafile ID, and get the physical path.\nAlex: yes.\nRolf: Standard ids queries DB for all the information, gives location to the plugin and makes sesne of it.\nPatrick: apply same logic as normal IDS, pass info to plugin, plugin applies its internal login and returns the physical path</p>\n<p>Alex showed an example of the config</p>\n<p>Alex: Key point: there are 3 possible locations, e.g. a Globus for public data. Emborgoed data that belongs to the user goes somewhere else. Depending on the kind it may end up in muleiple areas (and therefore, have multiple physical paths)\nLouise: Diamond also has multiple things, but is done in different ways.\nKevin: Similar problem, there are three places where Diamond's data could be. Would be nice to (if it exists on disk) move it between disk ednpoinds as we always go to tape. IDS per restore mechanism. Can push to Globus, or DLS, but once it's there we can't go get it. Maybe we could do something similar.</p>\n<p>Alex: No magic - instead of \"isOnline\" just return that path.</p>\n<p>Kevin: Are all these filesystems mounted? We don't have this. Some are in DLS and some are in SCD. We could benefit from something like this.</p>\n<p>Example of the query:</p>\n<pre><code class=\"language-text\">https://ids.esrf.fr/ids/path?sessionId=XXX&#x26;datasetIds=187132537&#x26;isonline=True\n\n[\"/data/id10b/inhouse/user17.2/scoppola/data\"]\n</code></pre>\n<p>and:</p>\n<pre><code class=\"language-text\">https://ids.esrf.fr/ids/path?sessionId=XXXX&#x26;datasetIds=187132537\n\n[\"/data/visitor/sc4680/id10/restored_dataset/_datasetId_187132537\",\"/data/projects/open-datasets/sc4680/id10/Phospholipidic bilayer at fluorocarbon oil - water interface_High energy X-ray reflectivity at lqiuid-liquid interface\",\"/data/projects/open-datasets/data/id10b/inhouse/user172/scoppola/data\",\"/data/icat/main/187132537\"]\n</code></pre>\n<h3>python-icat</h3>\n<p>Another release in December. Minor addition. Custom method for restoring data from IDS. Triggers a restore &#x26; waits for the restore to complete.</p>\n<h2>AOB</h2>\n<h3>December meeting</h3>\n<p>Cancel it, Kevin to set up meeting series for next year.</p>","frontmatter":{"title":"ICAT Collaboration Meeting - 28th November 2024","date":"2024-11-28T00:00:00.000Z"}}},"pageContext":{"slug":"/collaboration/communication/monthly-meetings/2024-meetings/20241128-meeting/"}},"staticQueryHashes":["2186722355","3212510956","3248290905","3649515864","4121107168"],"slicesMap":{}}